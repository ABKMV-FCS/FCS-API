<!doctype html>
<html lang="en">

<head>
  <title>Code coverage report for src/routes/timetable.js</title>
  <meta charset="utf-8" />
  <link rel="stylesheet" href="../../prettify.css" />
  <link rel="stylesheet" href="../../base.css" />
  <link rel="shortcut icon" type="image/x-icon" href="../../favicon.png" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style type='text/css'>
    .coverage-summary .sorter {
      background-image: url(../../sort-arrow-sprite.png);
    }
  </style>
</head>

<body>
  <div class='wrapper'>
    <div class='pad1'>
      <h1><a href="../../index.html">All files</a> / <a href="index.html">src/routes</a> timetable.js</h1>
      <div class='clearfix'>

        <div class='fl pad1y space-right2'>
          <span class="strong">40.13% </span>
          <span class="quiet">Statements</span>
          <span class='fraction'>63/157</span>
        </div>


        <div class='fl pad1y space-right2'>
          <span class="strong">33.33% </span>
          <span class="quiet">Branches</span>
          <span class='fraction'>6/18</span>
        </div>


        <div class='fl pad1y space-right2'>
          <span class="strong">36.84% </span>
          <span class="quiet">Functions</span>
          <span class='fraction'>7/19</span>
        </div>


        <div class='fl pad1y space-right2'>
          <span class="strong">41.89% </span>
          <span class="quiet">Lines</span>
          <span class='fraction'>62/148</span>
        </div>


      </div>
      <p class="quiet">
        Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the
        previous block.
      </p>
    </div>
    <div class='status-line low'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a></a><a href='#L1'>1</a>
<a></a><a href='#L2'>2</a>
<a></a><a href='#L3'>3</a>
<a></a><a href='#L4'>4</a>
<a></a><a href='#L5'>5</a>
<a></a><a href='#L6'>6</a>
<a></a><a href='#L7'>7</a>
<a></a><a href='#L8'>8</a>
<a></a><a href='#L9'>9</a>
<a></a><a href='#L10'>10</a>
<a></a><a href='#L11'>11</a>
<a></a><a href='#L12'>12</a>
<a></a><a href='#L13'>13</a>
<a></a><a href='#L14'>14</a>
<a></a><a href='#L15'>15</a>
<a></a><a href='#L16'>16</a>
<a></a><a href='#L17'>17</a>
<a></a><a href='#L18'>18</a>
<a></a><a href='#L19'>19</a>
<a></a><a href='#L20'>20</a>
<a></a><a href='#L21'>21</a>
<a></a><a href='#L22'>22</a>
<a></a><a href='#L23'>23</a>
<a></a><a href='#L24'>24</a>
<a></a><a href='#L25'>25</a>
<a></a><a href='#L26'>26</a>
<a></a><a href='#L27'>27</a>
<a></a><a href='#L28'>28</a>
<a></a><a href='#L29'>29</a>
<a></a><a href='#L30'>30</a>
<a></a><a href='#L31'>31</a>
<a></a><a href='#L32'>32</a>
<a></a><a href='#L33'>33</a>
<a></a><a href='#L34'>34</a>
<a></a><a href='#L35'>35</a>
<a></a><a href='#L36'>36</a>
<a></a><a href='#L37'>37</a>
<a></a><a href='#L38'>38</a>
<a></a><a href='#L39'>39</a>
<a></a><a href='#L40'>40</a>
<a></a><a href='#L41'>41</a>
<a></a><a href='#L42'>42</a>
<a></a><a href='#L43'>43</a>
<a></a><a href='#L44'>44</a>
<a></a><a href='#L45'>45</a>
<a></a><a href='#L46'>46</a>
<a></a><a href='#L47'>47</a>
<a></a><a href='#L48'>48</a>
<a></a><a href='#L49'>49</a>
<a></a><a href='#L50'>50</a>
<a></a><a href='#L51'>51</a>
<a></a><a href='#L52'>52</a>
<a></a><a href='#L53'>53</a>
<a></a><a href='#L54'>54</a>
<a></a><a href='#L55'>55</a>
<a></a><a href='#L56'>56</a>
<a></a><a href='#L57'>57</a>
<a></a><a href='#L58'>58</a>
<a></a><a href='#L59'>59</a>
<a></a><a href='#L60'>60</a>
<a></a><a href='#L61'>61</a>
<a></a><a href='#L62'>62</a>
<a></a><a href='#L63'>63</a>
<a></a><a href='#L64'>64</a>
<a></a><a href='#L65'>65</a>
<a></a><a href='#L66'>66</a>
<a></a><a href='#L67'>67</a>
<a></a><a href='#L68'>68</a>
<a></a><a href='#L69'>69</a>
<a></a><a href='#L70'>70</a>
<a></a><a href='#L71'>71</a>
<a></a><a href='#L72'>72</a>
<a></a><a href='#L73'>73</a>
<a></a><a href='#L74'>74</a>
<a></a><a href='#L75'>75</a>
<a></a><a href='#L76'>76</a>
<a></a><a href='#L77'>77</a>
<a></a><a href='#L78'>78</a>
<a></a><a href='#L79'>79</a>
<a></a><a href='#L80'>80</a>
<a></a><a href='#L81'>81</a>
<a></a><a href='#L82'>82</a>
<a></a><a href='#L83'>83</a>
<a></a><a href='#L84'>84</a>
<a></a><a href='#L85'>85</a>
<a></a><a href='#L86'>86</a>
<a></a><a href='#L87'>87</a>
<a></a><a href='#L88'>88</a>
<a></a><a href='#L89'>89</a>
<a></a><a href='#L90'>90</a>
<a></a><a href='#L91'>91</a>
<a></a><a href='#L92'>92</a>
<a></a><a href='#L93'>93</a>
<a></a><a href='#L94'>94</a>
<a></a><a href='#L95'>95</a>
<a></a><a href='#L96'>96</a>
<a></a><a href='#L97'>97</a>
<a></a><a href='#L98'>98</a>
<a></a><a href='#L99'>99</a>
<a></a><a href='#L100'>100</a>
<a></a><a href='#L101'>101</a>
<a></a><a href='#L102'>102</a>
<a></a><a href='#L103'>103</a>
<a></a><a href='#L104'>104</a>
<a></a><a href='#L105'>105</a>
<a></a><a href='#L106'>106</a>
<a></a><a href='#L107'>107</a>
<a></a><a href='#L108'>108</a>
<a></a><a href='#L109'>109</a>
<a></a><a href='#L110'>110</a>
<a></a><a href='#L111'>111</a>
<a></a><a href='#L112'>112</a>
<a></a><a href='#L113'>113</a>
<a></a><a href='#L114'>114</a>
<a></a><a href='#L115'>115</a>
<a></a><a href='#L116'>116</a>
<a></a><a href='#L117'>117</a>
<a></a><a href='#L118'>118</a>
<a></a><a href='#L119'>119</a>
<a></a><a href='#L120'>120</a>
<a></a><a href='#L121'>121</a>
<a></a><a href='#L122'>122</a>
<a></a><a href='#L123'>123</a>
<a></a><a href='#L124'>124</a>
<a></a><a href='#L125'>125</a>
<a></a><a href='#L126'>126</a>
<a></a><a href='#L127'>127</a>
<a></a><a href='#L128'>128</a>
<a></a><a href='#L129'>129</a>
<a></a><a href='#L130'>130</a>
<a></a><a href='#L131'>131</a>
<a></a><a href='#L132'>132</a>
<a></a><a href='#L133'>133</a>
<a></a><a href='#L134'>134</a>
<a></a><a href='#L135'>135</a>
<a></a><a href='#L136'>136</a>
<a></a><a href='#L137'>137</a>
<a></a><a href='#L138'>138</a>
<a></a><a href='#L139'>139</a>
<a></a><a href='#L140'>140</a>
<a></a><a href='#L141'>141</a>
<a></a><a href='#L142'>142</a>
<a></a><a href='#L143'>143</a>
<a></a><a href='#L144'>144</a>
<a></a><a href='#L145'>145</a>
<a></a><a href='#L146'>146</a>
<a></a><a href='#L147'>147</a>
<a></a><a href='#L148'>148</a>
<a></a><a href='#L149'>149</a>
<a></a><a href='#L150'>150</a>
<a></a><a href='#L151'>151</a>
<a></a><a href='#L152'>152</a>
<a></a><a href='#L153'>153</a>
<a></a><a href='#L154'>154</a>
<a></a><a href='#L155'>155</a>
<a></a><a href='#L156'>156</a>
<a></a><a href='#L157'>157</a>
<a></a><a href='#L158'>158</a>
<a></a><a href='#L159'>159</a>
<a></a><a href='#L160'>160</a>
<a></a><a href='#L161'>161</a>
<a></a><a href='#L162'>162</a>
<a></a><a href='#L163'>163</a>
<a></a><a href='#L164'>164</a>
<a></a><a href='#L165'>165</a>
<a></a><a href='#L166'>166</a>
<a></a><a href='#L167'>167</a>
<a></a><a href='#L168'>168</a>
<a></a><a href='#L169'>169</a>
<a></a><a href='#L170'>170</a>
<a></a><a href='#L171'>171</a>
<a></a><a href='#L172'>172</a>
<a></a><a href='#L173'>173</a>
<a></a><a href='#L174'>174</a>
<a></a><a href='#L175'>175</a>
<a></a><a href='#L176'>176</a>
<a></a><a href='#L177'>177</a>
<a></a><a href='#L178'>178</a>
<a></a><a href='#L179'>179</a>
<a></a><a href='#L180'>180</a>
<a></a><a href='#L181'>181</a>
<a></a><a href='#L182'>182</a>
<a></a><a href='#L183'>183</a>
<a></a><a href='#L184'>184</a>
<a></a><a href='#L185'>185</a>
<a></a><a href='#L186'>186</a>
<a></a><a href='#L187'>187</a>
<a></a><a href='#L188'>188</a>
<a></a><a href='#L189'>189</a>
<a></a><a href='#L190'>190</a>
<a></a><a href='#L191'>191</a>
<a></a><a href='#L192'>192</a>
<a></a><a href='#L193'>193</a>
<a></a><a href='#L194'>194</a>
<a></a><a href='#L195'>195</a>
<a></a><a href='#L196'>196</a>
<a></a><a href='#L197'>197</a>
<a></a><a href='#L198'>198</a>
<a></a><a href='#L199'>199</a>
<a></a><a href='#L200'>200</a>
<a></a><a href='#L201'>201</a>
<a></a><a href='#L202'>202</a>
<a></a><a href='#L203'>203</a>
<a></a><a href='#L204'>204</a>
<a></a><a href='#L205'>205</a>
<a></a><a href='#L206'>206</a>
<a></a><a href='#L207'>207</a>
<a></a><a href='#L208'>208</a>
<a></a><a href='#L209'>209</a>
<a></a><a href='#L210'>210</a>
<a></a><a href='#L211'>211</a>
<a></a><a href='#L212'>212</a>
<a></a><a href='#L213'>213</a>
<a></a><a href='#L214'>214</a>
<a></a><a href='#L215'>215</a>
<a></a><a href='#L216'>216</a>
<a></a><a href='#L217'>217</a>
<a></a><a href='#L218'>218</a>
<a></a><a href='#L219'>219</a>
<a></a><a href='#L220'>220</a>
<a></a><a href='#L221'>221</a>
<a></a><a href='#L222'>222</a>
<a></a><a href='#L223'>223</a>
<a></a><a href='#L224'>224</a>
<a></a><a href='#L225'>225</a>
<a></a><a href='#L226'>226</a>
<a></a><a href='#L227'>227</a>
<a></a><a href='#L228'>228</a></td><td class="line-coverage quiet"><span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span></td><td class="text"><pre class="prettyprint lang-js">const express = require('express');
const router = express.Router();
const { query } = require('../db');
const verifyJWT = require('../helpers/verify_jwt');
&nbsp;
router.post('/studenttimetabledownload', async (req, res) =&gt; {
  let { dept, sec, sem } = req.body;
  try {
    let asm = await query(`select * from active_sem`);
    let { academic_year } = asm[0];
    let result = await query(`SELECT slot, day, coursecode from Timetable WHERE section = '${sec}' and sem = '${sem}' and dept = '${dept}' and academic_year = '${academic_year}' `);
    if (result.length == 0) { return res.status(200).json({ message: 'no data available' }); }
    let coursename;
    for (const r1 of result) {
      coursename = await query(`SELECT name from course WHERE coursecode = '${r1.coursecode}'`);
      r1["coursename"] = coursename[0].name;
    }
    return res.status(200).json({ timetable: result, message: 'retrieval successful' });
  } catch (error) {
<span class="cstat-no" title="statement not covered" >    return res.status(500).json({ message: error });</span>
  }
});
&nbsp;
router.get('/readfaculty', async (req, res) =&gt; {
  try {
    console.log("hello");
    let result = await query(`select DISTINCT faculty from subjects_handled;`);
    <span class="missing-if-branch" title="if path not taken" >I</span>if (result.length == 0) { <span class="cstat-no" title="statement not covered" >return res.status(400).json({ message: 'faculties not found' }); </span>}
    return res.status(200).json({ faculties: result, message: 'retrieval successful' });
  } catch (error) {
<span class="cstat-no" title="statement not covered" >    return res.status(500).json({ message: error });</span>
  }
});
&nbsp;
router.post('/facultytimetabledownload', <span class="fstat-no" title="function not covered" >as</span>ync (req, res) =&gt; {
  let { faculty } = <span class="cstat-no" title="statement not covered" >req.body;</span>
<span class="cstat-no" title="statement not covered" >  try {</span>
    let asm = <span class="cstat-no" title="statement not covered" >await query(`select * from active_sem`);</span>
    let { odd, academic_year } = <span class="cstat-no" title="statement not covered" >asm[0];</span>
    let result = <span class="cstat-no" title="statement not covered" >await query(`</span>
    select tt.day, tt.slot, tt.coursecode, tt.section, tt.dept, tt.sem from (faculty_subject fs inner join timetable tt on fs.coursecode = tt.coursecode and fs.section = tt.section and fs.sem = tt.sem and fs.academic_year = tt.academic_year) where fs.academic_year = '${academic_year}' and fs.faculty = '${faculty}' and MOD(fs.sem, 2) = '${odd === 'odd' ? 1 : 0}'; `);
    let coursename;
<span class="cstat-no" title="statement not covered" >    for (const r2 of result) {</span>
<span class="cstat-no" title="statement not covered" >      coursename = await query(`SELECT name from course WHERE coursecode = '${r2.coursecode}'`);</span>
<span class="cstat-no" title="statement not covered" >      r2["coursename"] = coursename[0].name;</span>
    }
<span class="cstat-no" title="statement not covered" >    return res.status(200).json({ timetable: result, message: 'retrieval successful' });</span>
  } catch (error) {
<span class="cstat-no" title="statement not covered" >    return res.status(500).json({ message: error });</span>
  }
});
&nbsp;
router.post('/examtimetabledownload', <span class="fstat-no" title="function not covered" >as</span>ync (req, res) =&gt; {
  let { dept, type, sem } = <span class="cstat-no" title="statement not covered" >req.body;</span>
<span class="cstat-no" title="statement not covered" >  try {</span>
    let asm = <span class="cstat-no" title="statement not covered" >await query(`select * from active_sem`);</span>
    let { academic_year } = <span class="cstat-no" title="statement not covered" >asm[0];</span>
    let result = <span class="cstat-no" title="statement not covered" >await query(`SELECT date, exam_slot, faculty, coursecode from exam_slot WHERE type = '${type}' and sem = '${sem}' and dept = '${dept}' and academic_year = '${academic_year}' `);</span>
    let coursename;
<span class="cstat-no" title="statement not covered" >    for (const r3 of result) {</span>
<span class="cstat-no" title="statement not covered" >      coursename = await query(`SELECT name from course WHERE code = '${r3.coursecode}'`);</span>
<span class="cstat-no" title="statement not covered" >      r3["coursename"] = coursename[0].name;</span>
    }
<span class="cstat-no" title="statement not covered" >    return res.status(200).json({ timetable: result, message: 'retrieval successful' });</span>
  } catch (error) {
<span class="cstat-no" title="statement not covered" >    return res.status(500).json({ message: error });</span>
  }
});
&nbsp;
&nbsp;
router.get('/readdept', async (req, res) =&gt; {
  try {
    let result = await query(`select * from dep_duration;`);
    <span class="missing-if-branch" title="if path not taken" >I</span>if (result.length == 0) { <span class="cstat-no" title="statement not covered" >return res.status(400).json({ message: 'depts not found' }); </span>}
    return res.status(200).json({ departments: result, message: 'retrieval successful' });
  } catch (error) {
<span class="cstat-no" title="statement not covered" >    return res.status(500).json({ message: error });</span>
  }
});
router.post('/createdept',verifyJWT, <span class="fstat-no" title="function not covered" >as</span>ync (req, res) =&gt; {
  let { dept, sems } = <span class="cstat-no" title="statement not covered" >req.body;</span>
<span class="cstat-no" title="statement not covered" >  try {</span>
<span class="cstat-no" title="statement not covered" >    await query(`insert into dep_duration values ('${dept}','${sems}');`);</span>
<span class="cstat-no" title="statement not covered" >    return res.status(200).json({ message: 'insertion successful' });</span>
  } catch (error) {
<span class="cstat-no" title="statement not covered" >    return res.status(500).json({ message: error });</span>
  }
});
router.post('/updatedept',verifyJWT, <span class="fstat-no" title="function not covered" >as</span>ync (req, res) =&gt; {
  let { sems, dept, olddept } = <span class="cstat-no" title="statement not covered" >req.body;</span>
<span class="cstat-no" title="statement not covered" >  try {</span>
<span class="cstat-no" title="statement not covered" >    await query(`update dep_duration set sems='${sems}', dept='${dept}' where dept like '${olddept}';`);</span>
<span class="cstat-no" title="statement not covered" >    return res.status(200).json({ message: 'update successful' });</span>
  } catch (error) {
<span class="cstat-no" title="statement not covered" >    return res.status(500).json({ message: error });</span>
  }
});
router.post('/deletedept', verifyJWT,<span class="fstat-no" title="function not covered" >as</span>ync (req, res) =&gt; {
  let { dept } = <span class="cstat-no" title="statement not covered" >req.body;</span>
<span class="cstat-no" title="statement not covered" >  try {</span>
    let result = <span class="cstat-no" title="statement not covered" >await query(`select * from dep_duration where dept like '${dept}';`);</span>
<span class="cstat-no" title="statement not covered" >    if (result.length == 0) { <span class="cstat-no" title="statement not covered" >return res.status(400).json({ message: 'dept not found' });}</span></span>
<span class="cstat-no" title="statement not covered" >    await query(`delete from dep_duration where dept like '${dept}';`);</span>
<span class="cstat-no" title="statement not covered" >    return res.status(200).json({ message: 'deletion successful' });</span>
  } catch (error) {
<span class="cstat-no" title="statement not covered" >    return res.status(500).json({ message: error });</span>
  }
});
&nbsp;
router.get('/getactivesem', async (req, res) =&gt; {
  try {
    let result = await query(`select * from active_sem;`);
    <span class="missing-if-branch" title="if path not taken" >I</span>if (result.length == 0) { <span class="cstat-no" title="statement not covered" >return res.status(400).json({ message: 'active semester not found' });}</span>
    return res.status(200).json({ odd: result[0].odd, message: 'retrieval successful' });
  } catch (error) {
<span class="cstat-no" title="statement not covered" >    return res.status(500).json({ message: error });</span>
  }
});
&nbsp;
router.get('/readclassesunderdept/:dept', async (req, res) =&gt; {
  let { dept } = req.params
  try {
    let result = await query(`select section from dept_class where dept like '${dept}';`);
    <span class="missing-if-branch" title="if path not taken" >I</span>if (result.length == 0) { <span class="cstat-no" title="statement not covered" >return res.status(400).json({ message: 'sections not found' }); </span>}
    return res.status(200).json({ sections: result, message: 'retrieval successful' });
  } catch (error) {
<span class="cstat-no" title="statement not covered" >    return res.status(500).json({ message: error });</span>
  }
});
router.post('/createclassesunderdept',verifyJWT, <span class="fstat-no" title="function not covered" >as</span>ync (req, res) =&gt; {
  let { dept, section } = <span class="cstat-no" title="statement not covered" >req.body;</span>
<span class="cstat-no" title="statement not covered" >  try {</span>
<span class="cstat-no" title="statement not covered" >    await query(`insert into dept_class values ('${dept}','${section}');`);</span>
<span class="cstat-no" title="statement not covered" >    return res.status(200).json({ message: 'insertion successful' });</span>
  } catch (error) {
<span class="cstat-no" title="statement not covered" >    return res.status(500).json({ message: error });</span>
  }
});
&nbsp;
router.post('/updateclassesunderdept',verifyJWT, <span class="fstat-no" title="function not covered" >as</span>ync (req, res) =&gt; {
  let { dept, section, oldsection } = <span class="cstat-no" title="statement not covered" >req.body;</span>
<span class="cstat-no" title="statement not covered" >  try {</span>
<span class="cstat-no" title="statement not covered" >    await query(`update dept_class set dept='${dept}', section='${section}' where section like '${oldsection}';`);</span>
<span class="cstat-no" title="statement not covered" >    return res.status(200).json({ message: 'insertion successful' });</span>
  } catch (error) {
<span class="cstat-no" title="statement not covered" >    return res.status(500).json({ message: error });</span>
  }
});
&nbsp;
router.post('/deleteclassesunderdept',verifyJWT, <span class="fstat-no" title="function not covered" >as</span>ync (req, res) =&gt; {
  let { dept, section } = <span class="cstat-no" title="statement not covered" >req.body;</span>
<span class="cstat-no" title="statement not covered" >  try {</span>
    let result = <span class="cstat-no" title="statement not covered" >await query(`select * from dept_class where dept like '${dept}' and section like '${section}';`);</span>
<span class="cstat-no" title="statement not covered" >    if (result.length == 0) { <span class="cstat-no" title="statement not covered" >return res.status(400).json({ message: 'section not found' }); </span>}</span>
<span class="cstat-no" title="statement not covered" >    await query(`delete from dept_class where dept like '${dept}' and section like '${section}';`);</span>
<span class="cstat-no" title="statement not covered" >    return res.status(200).json({ message: 'deletion successful' });</span>
  } catch (error) {
<span class="cstat-no" title="statement not covered" >    return res.status(500).json({ message: error });</span>
  }
});
&nbsp;
router.get('/readcourses', async (req, res) =&gt; {
  try {
    let result = await query(`select * from course;`);
    return res.status(200).json({ courses: result, message: 'retrieval successful' });
  } catch (error) {
<span class="cstat-no" title="statement not covered" >    return res.status(500).json({ message: error });</span>
  }
});
&nbsp;
router.post('/createcourse',verifyJWT, <span class="fstat-no" title="function not covered" >as</span>ync (req, res) =&gt; {
  let { coursecode, name } = <span class="cstat-no" title="statement not covered" >req.body;</span>
<span class="cstat-no" title="statement not covered" >  try {</span>
<span class="cstat-no" title="statement not covered" >    await query(`insert into course values ('${coursecode}','${name}');`);</span>
<span class="cstat-no" title="statement not covered" >    return res.status(200).json({ message: 'insertion successful' });</span>
  } catch (error) {
<span class="cstat-no" title="statement not covered" >    return res.status(500).json({ message: error });</span>
  }
});
router.post('/updatecourse',verifyJWT, <span class="fstat-no" title="function not covered" >as</span>ync (req, res) =&gt; {
  let { name, coursecode, oldcoursecode } = <span class="cstat-no" title="statement not covered" >req.body;</span>
<span class="cstat-no" title="statement not covered" >  try {</span>
<span class="cstat-no" title="statement not covered" >    await query(`update course set name='${name}', coursecode='${coursecode}' where coursecode like '${oldcoursecode}';`);</span>
<span class="cstat-no" title="statement not covered" >    return res.status(200).json({ message: 'update successful' });</span>
  } catch (error) {
<span class="cstat-no" title="statement not covered" >    return res.status(500).json({ message: error });</span>
  }
});
router.post('/deletecourse',verifyJWT, <span class="fstat-no" title="function not covered" >as</span>ync (req, res) =&gt; {
  let { coursecode } = <span class="cstat-no" title="statement not covered" >req.body;</span>
<span class="cstat-no" title="statement not covered" >  try {</span>
    let result = <span class="cstat-no" title="statement not covered" >await query(`select * from course where coursecode like '${coursecode}';`);</span>
<span class="cstat-no" title="statement not covered" >    if (result.length == 0) { <span class="cstat-no" title="statement not covered" >return res.status(400).json({ message: 'course not found' }); </span>}</span>
<span class="cstat-no" title="statement not covered" >    await query(`delete from sem_course where coursecode like '${coursecode}';`);</span>
<span class="cstat-no" title="statement not covered" >    await query(`delete from course where coursecode like '${coursecode}';`);</span>
<span class="cstat-no" title="statement not covered" >    return res.status(200).json({ message: 'deletion successful' });</span>
  } catch (error) {
<span class="cstat-no" title="statement not covered" >    return res.status(500).json({ message: error });</span>
  }
});
&nbsp;
router.post('/getcourselistundersem', async (req, res) =&gt; {
  let { dept, sem } = req.body;
  try {
    let results = await query(`select * from sem_course where dept like '${dept}' and sem=${sem};`);
    let coursecodes = [];
    for(let result of results) {
      coursecodes.push(result.coursecode);
    }
    return res.status(200).json({ coursecodes, message: 'retreival successful' });
  } catch (error) {
<span class="cstat-no" title="statement not covered" >    return res.status(500).json({ message: error });</span>
  }
});
&nbsp;
router.post('/createcourseundersem',verifyJWT, <span class="fstat-no" title="function not covered" >as</span>ync (req, res) =&gt; {
  let { coursecodes, dept, sem } = <span class="cstat-no" title="statement not covered" >req.body;</span>
<span class="cstat-no" title="statement not covered" >  try {</span>
<span class="cstat-no" title="statement not covered" >    await query(`delete from sem_course where dept like '${dept}' and sem=${sem};`);</span>
<span class="cstat-no" title="statement not covered" >    console.log(req.body);</span>
<span class="cstat-no" title="statement not covered" >    for(let coursecode of coursecodes) <span class="cstat-no" title="statement not covered" >await query(`insert into sem_course values('${dept}',${sem},'${coursecode}');`);</span></span>
<span class="cstat-no" title="statement not covered" >    return res.status(200).json({ message: 'insertion successful' });</span>
  } catch (error) {
<span class="cstat-no" title="statement not covered" >    return res.status(500).json({ message: error });</span>
  }
});
&nbsp;
module.exports = router;</pre>
    </td>
    </tr>
    </table>
    </pre>

    <div class='push'></div><!-- for sticky footer -->
  </div><!-- /wrapper -->

  </div>
  <script src="../../prettify.js"></script>
  <script>
    window.onload = function () {
      prettyPrint();
    };
  </script>
  <script src="../../sorter.js"></script>
  <script src="../../block-navigation.js"></script>
</body>

</html>